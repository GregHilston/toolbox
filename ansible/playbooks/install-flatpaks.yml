- hosts: "localhost"
  tasks:
    - name: Install Flatpak
      ansible.builtin.package:
        name: flatpak
        state: present
      become: true

    - name: Add the flathub flatpak repository remote to the user installation
      community.general.flatpak_remote:
        name: flathub
        state: present
        flatpakrepo_url: https://dl.flathub.org/repo/flathub.flatpakrepo
        method: user

    - name: Install Slack from Flathub
      community.general.flatpak:
        name: com.slack.Slack
        state: present
        method: user

    - name: Install Spotify from Flathub
      community.general.flatpak:
        name: com.spotify.Client
        state: present
        method: user

    - name: Install Bitwarden from Flathub
      community.general.flatpak:
        name: com.bitwarden.desktop
        state: present
        method: user

    - name: Install Obsidian from Flathub
      community.general.flatpak:
        name: md.obsidian.Obsidian
        state: present
        method: user

    - name: Install Visual Studio Code from Flathub
      community.general.flatpak:
        name: com.visualsutdio.code
        state: present
        method: user