machineName := "nixos" # Use when talking about say remote nixOS VM, in your /etc/hosts file
localPath := "~/Git/toolbox/nixos/*"
remotePath := "/home/ghilston/Git/toolbox/nixos/"

scp_files:
    scp -r * "{{machineName}}:{{remotePath}}"

remote_update:
    ssh -t "{{machineName}}" 'sudo cp -r {{localPath}} /etc/nixos/ && sudo nixos-rebuild switch'

update:
    sudo nixos-rebuild -I nixos-config=/home/ghilston/Git/toolbox/nixos/configuration.nix switch

remote_deploy: scp_files remote_update

local_deploy: update
